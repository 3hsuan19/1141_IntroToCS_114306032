<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>1A2B Game</title>
</head>

<body>
  <h1>StudentID_HW7_1A2B</h1>

  <input type="text" id="guessInput" maxlength="4">
  <button onclick="play()">Guess</button>

  <p id="record"></p>

  <script>
    let answer = generateAnswer();
    let count = 0;

    function generateAnswer() {
      let nums = [0,1,2,3,4,5,6,7,8,9];
      let result = "";

      for (let i = 0; i < 4; i++) {
        let index = Math.floor(Math.random() * nums.length);
        result += nums[index];
        nums.splice(index, 1);
      }
      return result;
    }

    function isValid(str) {
      if (str.length !== 4) return false;
      if (isNaN(str)) return false;

      let set = new Set(str);
      return set.size === 4;
    }

    function checkAB(guess, ans) {
      let A = 0;
      let B = 0;

      for (let i = 0; i < 4; i++) {
        if (guess[i] === ans[i]) {
          A++;
        } else if (ans.includes(guess[i])) {
          B++;
        }
      }
      return A + "A" + B + "B";
    }

    function play() {
      let input = document.getElementById("guessInput").value.trim();

      if (!isValid(input)) {
        alert("Invalid input! Please enter 4 different digits.");
        return;
      }

      count++;
      let result = checkAB(input, answer);

      document.getElementById("record").innerHTML +=
        count + ". " + input + " â†’ " + result + "<br>";

      document.getElementById("guessInput").value = "";

      if (result === "4A0B") {
        alert("Congratulations! Total attempts: " + count);
      }
    }
    
    </script>
  </script>
</body>
</html>
